(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1434:function(e,t,o){var content=o(1454);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(18).default)("4c572f66",content,!0,{sourceMap:!1})},1442:function(e,t,o){"use strict";o.r(t);o(15);var r=o(97),n=o(7),l=o(14),c=o(2),d=o(10),m=o(6),h=o(8),f=o(4),v=o(3),w=(o(33),o(12),o(13),o(35),o(47),o(52),o(56),o(53),o(30),o(643),o(71),o(644),o(645),o(646),o(647),o(648),o(649),o(650),o(651),o(652),o(653),o(654),o(655),o(656),o(657),o(658),o(659),o(72),o(82),o(70),o(1452),o(1)),k=o(28),O=o(108),_=o(26),S=o(88),y=o(23),x=o(27),E=o.n(x),R=o(121),T=o(20),C=o(11),U=o(45),F=o(66);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=Object(f.a)(e);if(t){var n=Object(f.a)(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Object(h.a)(this,o)}}var A,I,P=function(e,t,o,desc){var r,n=arguments.length,l=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(n<3?r(l):n>3?r(t,o,l):r(t,o))||l);return n>3&&l&&Object.defineProperty(t,o,l),l},L=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j=E()("app:store-login");!function(e){e.login="login",e.register="register",e.passwordReset="password-reset",e.fillEmail="fill-email"}(I||(I={}));var D=function(e){Object(m.a)(D,e);var t,o,h,f,v,w,k,x,E,A,P,L=$(D);function D(){var e,t;return Object(c.a)(this,D),(t=L.apply(this,arguments)).isShowPassword=!1,t.passwordsNotMatch=!1,t.mode=I.login,t.originalMode=null,t.config={},t.accessToken=null,t.submitting=!1,t.requiredFieldsValid=!1,t.showedFields=[],t.form=(e={},Object(l.a)(e,_.i.EMAIL,""),Object(l.a)(e,"password",""),Object(l.a)(e,"passwordConfirmation",""),Object(l.a)(e,"promoInfo",!1),Object(l.a)(e,"termsAndConditions",!1),Object(l.a)(e,"optInCpf",!1),Object(l.a)(e,_.i.FIRSTNAME,""),Object(l.a)(e,_.i.LASTNAME,""),Object(l.a)(e,_.i.COUNTRY_PROFILE,""),Object(l.a)(e,_.i.CPF,""),Object(l.a)(e,_.i.PHONE_NUMBER_PREFIX,""),Object(l.a)(e,_.i.PHONE_NUMBER_SUFIX,""),Object(l.a)(e,_.i.DOCUMENT_TYPE,""),e),t.formAlias=C.c.REGISTER,t.socialAuthType=null,t.userSocialSignUpDTO=null,t.googleParams=null,t.googleClient=null,t.googleAccessToken="",t.isErrors=!1,t}return Object(d.a)(D,[{key:"isLoading",get:function(){var e,t;return null===(t=null===(e=this.$nuxt)||void 0===e?void 0:e.$loading)||void 0===t?void 0:t.show}},{key:"getRegExpPassword",get:function(){return Object(T.c)("".concat(S.e.password),["/"])}},{key:"passwordResetIsDisabled",get:function(){return this.isLoading||!(this.checkEmailValidation()&&this.config&&this.config.slug)}},{key:"loginRegisterIsDisabled",get:function(){return this.isLoading||!(this.checkPasswordValidation()&&this.checkEmailValidation()&&this.config&&this.config.slug)||this.mode===I.register&&this.registerIsDisabled}},{key:"registerIsDisabled",get:function(){return!this.form.termsAndConditions||this.form.password!==this.form.passwordConfirmation||!!this.imRequiredFields.length&&!this.requiredFieldsValid}},{key:"termsLink",get:function(){var e;return(null===(e=this.mopStoreLinks)||void 0===e?void 0:e.terms)||null}},{key:"privacyLink",get:function(){var e;return(null===(e=this.mopStoreLinks)||void 0===e?void 0:e.privacy)||null}},{key:"storeUrl",get:function(){var e="".concat(window.location.origin).concat(this.basePath);return this.externalSessionCode?"".concat(e,"?").concat(U.b.EXTERNAL_SESSION_CODE,"=").concat(this.externalSessionCode):e}},{key:"disabledFillEmail",get:function(){return!(!this.isLoading&&this.form.email&&this.form.termsAndConditions&&this.showedFields.length)||!this.requiredFieldsValid}},{key:"disabledEmail",get:function(){var e,t;return this.userSocialSignUpDTO&&(null===(t=null===(e=this.userSocialSignUpDTO)||void 0===e?void 0:e.email)||void 0===t?void 0:t.length)>0}},{key:"checkPasswordsLengthAndMatch",value:function(){this.form.password.length>=8&&this.form.passwordConfirmation.length>=8&&(this.passwordsNotMatch=this.form.password!==this.form.passwordConfirmation)}},{key:"checkFormIsValid",value:function(){var e=this.loginForm.checkValidity();return this.checkPasswordsLengthAndMatch(),e&&!this.passwordsNotMatch}},{key:"onFormChangeValidity",value:function(e){this.requiredFieldsValid=Object.keys(e).reduce((function(t,o){return t&&!!e[o]}),!0)}},{key:"checkPasswordValidation",value:function(){return S.e.password.test(this.form.password)}},{key:"checkEmailValidation",value:function(){return S.e.email.test(this.form.email)}},{key:"cpfOptIn",get:function(){return this.imRequiredFields.includes(_.i.CPF)}},{key:"initRequiredFields",value:function(){var e=this;this.imRequiredFields.forEach(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$set(e.form,o,""),e.showedFields.push(o),o===_.i.COUNTRY_PROFILE&&e.$set(e.form,o,e.siteCountry),o===_.i.CPF&&e.showedFields.push(_.i.DOCUMENT_TYPE),o===_.i.PHONE_NUMBER_PREFIX&&(e.showedFields.push(_.i.PHONE_NUMBER_SUFIX),e.$set(e.form,_.i.PHONE_NUMBER_PREFIX,e.prefixNumberPhone)),o===_.i.PHONE_NUMBER_SUFIX&&(e.showedFields.push(_.i.PHONE_NUMBER_PREFIX),e.$set(e.form,_.i.PHONE_NUMBER_PREFIX,e.prefixNumberPhone)),e.showedFields=Object(r.a)(new Set(e.showedFields));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"checkPasswords",value:function(){this.checkPasswordsLengthAndMatch()}},{key:"checkAuthPage",value:function(e){e===I.register?this.$store.dispatch("gtm/gtmTrackPageView",{cg:C.g.USER,cg2:C.h.SIGN_UP}):e===I.login?this.$store.dispatch("gtm/gtmTrackPageView",{cg:C.g.USER,cg2:C.h.LOGIN}):e===I.passwordReset&&this.$store.dispatch("gtm/gtmTrackPageView",{cg:C.g.USER,cg2:C.h.PASSWORD,cg3:C.i.RECOVER})}},{key:"invalidateForm",value:function(){this.isErrors=!0}},{key:"mounted",value:(P=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$nuxt.$loading.start(),this.$store.dispatch("gtm/gtmTrackPageView",{cg:C.g.USER,cg2:C.h.LOGIN}),t=this.initGoogleClient(),e.prev=3,e.next=6,Object(O.e)();case 6:if(this.config=e.sent,!this.user||!this.externalSessionCode){e.next=10;break}return e.next=10,this.$store.dispatch("auth/logoutUser");case 10:this.accessToken=Object(O.b)(),this.initRequiredFields(),this.$nuxt.$loading.finish(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),j("getIMConfig Request failed or unhandled error inside mounted",(null===e.t0||void 0===e.t0?void 0:e.t0.response)||e.t0.message);case 18:if(t){e.next=22;break}return e.next=21,new Promise((function(e){return setTimeout(e,1e3)}));case 21:t=this.initGoogleClient();case 22:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(){return P.apply(this,arguments)})},{key:"doSubmit",value:(A=Object(n.a)(regeneratorRuntime.mark((function e(){var t,o,r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submitting=!0,this.$nuxt.$loading.start(),this.checkFormIsValid()){e.next=5;break}return this.$nuxt.$loading.finish(),e.abrupt("return",null);case 5:if(e.prev=5,this.isErrors=!1,this.mode!==I.login){e.next=12;break}return e.next=10,this.$store.dispatch("auth/loginUser",{email:this.form.email,password:this.form.password,app:this.config.slug});case 10:e.next=17;break;case 12:return r=(null===(t=this.form)||void 0===t?void 0:t.cpf)?Object(T.c)(this.form.cpf,R.a):"",n=this.form.optInCpf?"true":"false",c=this.imRequiredFields.includes(_.i.DOCUMENT_TYPE)?this.form.documentType:"",e.next=17,this.$store.dispatch("auth/registerUserDatabase",(o={},Object(l.a)(o,_.i.EMAIL,this.form.email),Object(l.a)(o,"password",this.form.password),Object(l.a)(o,"passwordConfirmation",this.form.passwordConfirmation),Object(l.a)(o,"country",this.country),Object(l.a)(o,"promoInfo",this.form.promoInfo?"true":"false"),Object(l.a)(o,"landingVerifyUrl",this.storeUrl),Object(l.a)(o,_.i.COUNTRY_PROFILE,this.form.countryProfile),Object(l.a)(o,_.i.FIRSTNAME,this.form.firstname),Object(l.a)(o,_.i.LASTNAME,this.form.lastname),Object(l.a)(o,_.i.DOCUMENT_TYPE,c),Object(l.a)(o,_.i.CPF,r),Object(l.a)(o,_.i.PHONE_NUMBER_PREFIX,this.form.phoneNumberPrefix),Object(l.a)(o,_.i.PHONE_NUMBER_SUFIX,this.form.phoneNumberSufix),Object(l.a)(o,"optInCpf",this.cpfOptIn?n:void 0),o));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),e.t0.message===S.d.ACCOUNT_MUST_BE_VERIFIED?(this.$store.dispatch("gtm/gtmTrack".concat(this.mode===I.login?"LoginError":"SignUpError"),S.d.ACCOUNT_MUST_BE_VERIFIED),this.$store.dispatch("gtm/gtmTrackSignUp",_.r.DATABASE),this.$store.commit("auth/SET_EMAIL_CONFIRMATION",this.form.email),this.$store.dispatch("auth/checkAfterLogin"),this.$store.dispatch("auth/closeLoginForm"),this.mode===I.login?this.$store.dispatch("auth/showVerificationStatus",_.n.LOGIN):this.$store.dispatch("auth/showVerificationForm"),this.$store.dispatch("auth/setRegisterType",_.r.DATABASE)):(console.error("CRAP",e.t0),this.$store.dispatch("gtm/gtmTrack".concat(this.mode===I.login?"LoginError":"SignUpError"),e.t0.message||"RequestFailed"),this.$notifier.showNotification(new F.b({duration:15,type:F.c.ERROR,location:F.a.BOTTOM,content:this.$t("".concat(this.mode,".database.error")).toString()})));case 22:this.$nuxt.$loading.finish(),this.submitting=!1;case 24:case"end":return e.stop()}}),e,this,[[5,19]])}))),function(){return A.apply(this,arguments)})},{key:"handleSocialErrors",value:(E=Object(n.a)(regeneratorRuntime.mark((function e(t,o){var r,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=I.fillEmail,this.$store.dispatch("auth/checkAfterLogin"),j("Error captured in handleSocialErrors: ",t.message),e.t0=t.message,e.next=e.t0===S.d.ACCOUNT_MUST_BE_VERIFIED?6:e.t0===S.f.POPUP_CLOSED_BY_USER?11:e.t0===S.d.USER_NOT_REGISTERED?12:e.t0===S.d.FILL_EMAIL_NEEDED?25:e.t0===S.d.CANT_CHANGE_EMAIL?30:33;break;case 6:return this.$store.dispatch("gtm/gtmTrack".concat(this.mode===I.login?"LoginError":"SignUpError"),S.d.ACCOUNT_MUST_BE_VERIFIED),this.$store.dispatch("gtm/gtmTrackSignUp",this.socialAuthType||_.r.DATABASE),this.$store.dispatch("auth/closeLoginForm"),this.mode===I.login?this.$store.dispatch("auth/showVerificationStatus",_.n.LOGIN):this.$store.dispatch("auth/showVerificationForm"),e.abrupt("break",36);case 11:return e.abrupt("break",36);case 12:if(this.mode=I.register,this.fillUserSocialSignUpDTO(),this.isFullfilledRequiredFields()){e.next=20;break}this.originalMode=this.mode,this.mode=l,this.form.email=(null===(r=this.userSocialSignUpDTO)||void 0===r?void 0:r.email)||"",e.next=24;break;case 20:if(!o){e.next=24;break}return j("executing callback"),e.next=24,o();case 24:return e.abrupt("break",36);case 25:return this.$store.dispatch("gtm/gtmTrack".concat(this.mode===I.login?"LoginError":"SignUpError"),S.d.FILL_EMAIL_NEEDED),this.originalMode=this.mode,this.mode=l,this.form.email=(null===(n=this.userSocialSignUpDTO)||void 0===n?void 0:n.email)||"",e.abrupt("break",36);case 30:return this.$store.dispatch("gtm/gtmTrack".concat(this.mode===I.login?"LoginError":"SignUpError"),S.d.CANT_CHANGE_EMAIL),this.$notifier.showNotification(new F.b({duration:15,type:F.c.ERROR,location:F.a.BOTTOM,content:this.$t("".concat(this.mode,".social.IMerrors.").concat(S.d.CANT_CHANGE_EMAIL)).toString()})),e.abrupt("break",36);case 33:return this.$store.dispatch("gtm/gtmTrack".concat(this.mode===I.login?"LoginError":"SignUpError"),t.message||"RequestFailed"),this.$notifier.showNotification(new F.b({duration:15,type:F.c.ERROR,location:F.a.BOTTOM,content:this.$t("".concat(this.mode,".social.").concat(this.socialAuthType,".error")).toString()})),e.abrupt("break",36);case 36:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"getFacebookUser",value:(x=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var o=window.FB;o.login((function(r){r.authResponse?null==o||o.api("/me?fields=id,name,email,first_name,last_name",(function(r){null==o||o.getLoginStatus((function(o){"connected"===o.status?(r.accessToken=o.authResponse.accessToken,e(r)):t(new Error("Could not retrieve facebook user's acess token."))}))})):r.authResponse?t(new Error("User cancelled login or did not fully authorize.")):t(new Error(S.f.POPUP_CLOSED_BY_USER))}),{scope:"public_profile,email"})})));case 1:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)})},{key:"loginOrRegisterFB",value:(k=Object(n.a)(regeneratorRuntime.mark((function e(){var t,o,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$nuxt.$loading.start(),this.socialAuthType=_.r.FACEBOOK,this.$store.dispatch("auth/setRegisterType",_.r.FACEBOOK),this.mode!==I.login){e.next=20;break}return e.prev=4,e.next=7,this.getFacebookUser();case 7:return t=e.sent,this.userSocialSignUpDTO={email:(null==t?void 0:t.email)||"",country:this.country,id:(null==t?void 0:t.id)||"",accessToken:t.accessToken,type:_.r.FACEBOOK,required:{}},e.next=11,this.$store.dispatch("auth/registerUserSocial",{userRegistration:this.userSocialSignUpDTO,withMetadata:!1,landingVerifyUrl:this.storeUrl});case 11:this.userSocialSignUpDTO=null,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(4),e.next=18,this.handleSocialErrors(e.t0,this.loginOrRegisterFB);case 18:e.next=37;break;case 20:if(e.prev=20,this.userSocialSignUpDTO){e.next=26;break}return e.next=24,this.getFacebookUser();case 24:o=e.sent,this.userSocialSignUpDTO={email:(null==o?void 0:o.email)||"",country:this.country,id:(null==o?void 0:o.id)||"",accessToken:o.accessToken,type:_.r.FACEBOOK,required:{}};case 26:return r=this.isFullfilledRequiredFields(),n=r,e.next=30,this.$store.dispatch("auth/registerUserSocial",{userRegistration:this.userSocialSignUpDTO,withMetadata:n,landingVerifyUrl:this.storeUrl});case 30:this.userSocialSignUpDTO=null,e.next=37;break;case 33:return e.prev=33,e.t1=e.catch(20),e.next=37,this.handleSocialErrors(e.t1,this.loginOrRegisterFB);case 37:this.$nuxt.$loading.finish();case 38:case"end":return e.stop()}}),e,this,[[4,14],[20,33]])}))),function(){return k.apply(this,arguments)})},{key:"loginOrRegisterApple",value:(w=Object(n.a)(regeneratorRuntime.mark((function e(){var t,o,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$nuxt.$loading.start(),this.socialAuthType=_.r.APPLE,e.prev=2,!this.userSocialSignUpDTO&&this.userSocialDTO&&(this.userSocialSignUpDTO=this.userSocialDTO),this.userSocialSignUpDTO){e.next=10;break}return e.next=7,this.getAppleUser();case 7:t=e.sent,this.userSocialSignUpDTO=t,this.$store.dispatch("auth/setUserSignUpSocialDTO",this.userSocialSignUpDTO);case 10:if(!this.userSocialSignUpDTO.email.includes(_.a)){e.next=14;break}throw this.userSocialSignUpDTO.email="",this.$store.dispatch("auth/setUserSignUpSocialDTO",this.userSocialSignUpDTO),new Error(S.d.FILL_EMAIL_NEEDED);case 14:return(o=this.mode===I.register)&&(this.userSocialSignUpDTO.country=this.country),r=this.isFullfilledRequiredFields(),n=!1,o&&(n=r),e.next=21,this.$store.dispatch("auth/registerUserSocial",{userRegistration:this.userSocialSignUpDTO,withMetadata:n,landingVerifyUrl:this.storeUrl});case 21:this.userSocialSignUpDTO=null,e.next=28;break;case 24:e.prev=24,e.t0=e.catch(2),this.$store.dispatch("auth/setRegisterType",_.r.APPLE),this.handleSocialErrors(e.t0,this.loginOrRegisterApple);case 28:this.$nuxt.$loading.finish();case 29:case"end":return e.stop()}}),e,this,[[2,24]])}))),function(){return w.apply(this,arguments)})},{key:"getAppleUser",value:(v=Object(n.a)(regeneratorRuntime.mark((function e(){var t,o,r,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(y.n)(this.storeUrl),t=window.AppleID.auth,e.next=5,t.signIn();case 5:return o=e.sent,r=null==o?void 0:o.user,n=o.authorization,e.next=10,Object(y.j)(n);case 10:if(l=e.sent){e.next=13;break}throw new Error("Error verifying user Apple Token (getting socialId inside getAppleUser)");case 13:return e.abrupt("return",{email:(null==r?void 0:r.email)||"",country:this.country,id:l,accessToken:n.code,idToken:n.id_token,type:_.r.APPLE,required:{}});case 16:if(e.prev=16,e.t0=e.catch(0),e.t0.error!==S.f.POPUP_CLOSED_BY_USER){e.next=20;break}throw new Error(S.f.POPUP_CLOSED_BY_USER);case 20:throw new Error("Something went wrong with apple, user cancelled login or did not fully authorize.");case 21:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(){return v.apply(this,arguments)})},{key:"doFillEmail",value:(f=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.submitting=!0,this.mode=this.originalMode||I.login,this.userSocialSignUpDTO&&(this.userSocialSignUpDTO.email=this.form.email,this.userSocialSignUpDTO.promoInfo=this.form.promoInfo?"true":"false",this.fillUserSocialSignUpDTO()),e.next=5,this.$store.dispatch("auth/setEmailConfirmation",(null===(t=this.userSocialSignUpDTO)||void 0===t?void 0:t.email)||this.form.email);case 5:return e.prev=5,e.next=8,this.$store.dispatch("auth/registerUserSocial",{userRegistration:this.userSocialSignUpDTO,withMetadata:!0,landingVerifyUrl:this.storeUrl});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.handleSocialErrors(e.t0);case 13:return e.prev=13,this.userSocialSignUpDTO=null,this.submitting=!1,e.finish(13);case 17:case"end":return e.stop()}}),e,this,[[5,10,13,17]])}))),function(){return f.apply(this,arguments)})},{key:"doPasswordReset",value:(h=Object(n.a)(regeneratorRuntime.mark((function e(){var t,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){o.$confirmation.open({title:o.$t("password-reset.".concat(e,".title")).toString(),body:o.$t("password-reset.".concat(e,".body")).toString(),accept:o.$t("common.alert.accept").toString(),cancelClass:"is-hidden"})},this.$nuxt.$loading.start(),e.prev=2,e.next=5,this.passwordReset(this.form.email);case 5:t("ok"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t("error");case 11:this.$nuxt.$loading.finish();case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return h.apply(this,arguments)})},{key:"initGoogleClient",value:function(){try{return this.googleParams=Object(y.f)(),this.googleClient=window.google.accounts.oauth2.initTokenClient({client_id:this.googleParams.client_id,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid",callback:this.onGoogleTokenResponse}),j("Loaded initGoogleClient successfully"),!0}catch(e){return j("Error while initializing GSI client for sign in",e),!1}}},{key:"getGoogleToken",value:function(){try{this.googleClient.requestAccessToken()}catch(e){j("Error inside getGoogleToken()",e),this.handleSocialErrors(e)}}},{key:"getGoogleUser",value:(o=Object(n.a)(regeneratorRuntime.mark((function e(t){var o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.googleAccessToken=t.access_token,e.next=3,Object(y.e)(this.googleAccessToken);case 3:if(!(o=e.sent)){e.next=9;break}return r={email:(null==o?void 0:o.email)||"",country:this.country,id:(null==o?void 0:o.sub)||"",accessToken:this.googleAccessToken,type:_.r.GOOGLE,required:{}},e.abrupt("return",r);case 9:throw new Error("Something went wrong with google. No user info returned by google oauth endpoint");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onGoogleTokenResponse",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var o,r,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.$nuxt.$loading.start(),this.socialAuthType=_.r.GOOGLE,this.userSocialSignUpDTO){e.next=8;break}return e.next=6,this.getGoogleUser(t);case 6:o=e.sent,this.userSocialSignUpDTO=o;case 8:return(r=this.mode===I.register)&&(this.userSocialSignUpDTO.country=this.country),n=this.isFullfilledRequiredFields(),l=!1,r&&(l=n),e.next=15,this.$store.dispatch("auth/registerUserSocial",{userRegistration:this.userSocialSignUpDTO,withMetadata:l,landingVerifyUrl:this.storeUrl});case 15:this.userSocialSignUpDTO=null,e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),j("Error inside onGoogleTokenResponse()",e.t0),this.$store.dispatch("auth/setRegisterType",_.r.GOOGLE),this.handleSocialErrors(e.t0,this.onGoogleTokenResponse);case 23:this.$nuxt.$loading.finish();case 24:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(e){return t.apply(this,arguments)})},{key:"fillUserSocialSignUpDTO",value:function(){var e=this;this.userSocialSignUpDTO&&this.imRequiredFields.length&&this.imRequiredFields.forEach((function(t){var o,r;(null===(o=e.userSocialSignUpDTO)||void 0===o?void 0:o.required)&&(e.userSocialSignUpDTO.required[t]=null===(r=e.form)||void 0===r?void 0:r[t],t===_.i.CPF&&(e.userSocialSignUpDTO.required[t]=Object(T.c)(e.userSocialSignUpDTO.required[t],R.a)))}))}},{key:"isFullfilledRequiredFields",value:function(){var e=this;if(this.imRequiredFields.length){var t=!0;return this.imRequiredFields.forEach((function(o){var r,n;(null===(n=null===(r=e.userSocialSignUpDTO)||void 0===r?void 0:r.required)||void 0===n?void 0:n[o])||(t=!1)})),t}return!0}}]),D}(k.default);P([Object(w.Ref)("loginForm"),L("design:type","function"==typeof(A="undefined"!=typeof HTMLFormElement&&HTMLFormElement)?A:Object)],D.prototype,"loginForm",void 0),P([Object(w.State)((function(e){return e.mop.siteCountry})),L("design:type",String)],D.prototype,"siteCountry",void 0),P([Object(w.State)((function(e){return e.auth.user})),L("design:type",Object)],D.prototype,"user",void 0),P([Object(w.State)((function(e){return e.externalSessionCode})),L("design:type",String)],D.prototype,"externalSessionCode",void 0),P([Object(w.Getter)("getSiteCountry"),L("design:type",String)],D.prototype,"country",void 0),P([Object(w.Getter)("mop/mopStoreLinks"),L("design:type",Object)],D.prototype,"mopStoreLinks",void 0),P([Object(w.Getter)("mop/basePath"),L("design:type",String)],D.prototype,"basePath",void 0),P([Object(w.Getter)("auth/userSocialDTO"),L("design:type",Object)],D.prototype,"userSocialDTO",void 0),P([Object(w.Getter)("auth/imRequiredFields"),L("design:type",Array)],D.prototype,"imRequiredFields",void 0),P([Object(w.Getter)("mop/prefixNumberPhone"),L("design:type",String)],D.prototype,"prefixNumberPhone",void 0),P([Object(w.Watch)("form",{immediate:!0,deep:!0}),L("design:type",Function),L("design:paramtypes",[]),L("design:returntype",void 0)],D.prototype,"checkPasswords",null),P([Object(w.Watch)("mode"),L("design:type",Function),L("design:paramtypes",[String]),L("design:returntype",void 0)],D.prototype,"checkAuthPage",null),P([Object(w.Action)("auth/closeLoginForm"),L("design:type",Function)],D.prototype,"closeForm",void 0),P([Object(w.Action)("auth/passwordReset"),L("design:type",Function)],D.prototype,"passwordReset",void 0);var N=D=P([Object(w.Component)({})],D),M=(o(1453),o(9)),component=Object(M.a)(N,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ModalFull",{staticClass:"mcd-im-login",on:{close:e.closeForm}},[o("h1",[e._v(e._s(e.$t(e.mode+".form.title")))]),e._v(" "),"fill-email"===e.mode?o("h4",[e._v("\n    "+e._s(e.$t(e.mode+".form.subtitle")+" "+e.socialAuthType[0].toUpperCase()+e.socialAuthType.substr(1))+"\n  ")]):e._e(),e._v(" "),o("div",{staticClass:"mcd-im-login-card"},["password-reset"===e.mode?o("div",[o("br"),e._v(" "),o("p",[e._v(e._s(e.$t(e.mode+".form.description")))]),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("FormInput",{attrs:{form:"login.form",required:!0,name:"email",type:"email",maxlength:"40",autocomplete:"false"},on:{invalid:e.invalidateForm},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),o("div",{staticClass:"btn-container"},[o("br"),e._v(" "),o("br"),e._v(" "),o("button",{staticClass:"button is-primary recover-password-button",attrs:{disabled:e.passwordResetIsDisabled},on:{click:function(t){return e.doPasswordReset()}}},[e._v("\n          "+e._s(e.$t(e.mode+".form.submit"))+"\n        ")])]),e._v(" "),o("div",{staticClass:"login-or-register"},[o("button",{staticClass:"button is-ghost already",attrs:{disabled:e.isLoading},on:{click:function(t){e.mode="login"}}},[o("svg",{staticClass:"return-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"11",viewBox:"0 0 13 11"}},[o("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[o("g",{attrs:{fill:"#006BAE"}},[o("g",[o("path",{attrs:{d:"M13 5.612L8.246.607c-.892-.833-2.253-.813-3.104.085l1.592 1.676 1.85 1.946H3.007l-.869.013C.95 4.391 0 5.418 0 6.687h2.252L.83 6.685h7.966l-1.85 1.95-1.593 1.675c.852.897 2.213.916 3.097.075L13 5.612z",transform:"translate(-789.000000, -1054.000000) translate(639.000000, 1048.000000) translate(150.000000, 6.000000) translate(6.500000, 5.500000) scale(1, -1) translate(-6.500000, -5.500000)"}})])])])]),e._v("\n\n          "+e._s(e.$t(e.mode+".return"))+"\n        ")])])],1):[e.config&&"fill-email"!==e.mode?o("div",{staticClass:"mcd-im-login__social-buttons"},[o("h4",[e._v(e._s(e.$t(e.mode+".form.social-networks.title")))]),e._v(" "),o("div",[o("button",{staticClass:"button is-outlined",attrs:{disabled:e.isLoading},on:{click:function(t){return e.loginOrRegisterFB()}}},[o("span",{staticClass:"icon-btn",class:"icon-facebook"}),e._v("\n            "+e._s(e.$t(e.mode+".form.social-networks.items.facebook"))+"\n          ")]),e._v(" "),o("button",{staticClass:"button is-outlined",attrs:{disabled:e.isLoading||!e.googleClient},on:{click:e.getGoogleToken}},[o("span",{staticClass:"icon-btn",class:"icon-google"}),e._v("\n            "+e._s(e.$t(e.mode+".form.social-networks.items.google"))+"\n          ")]),e._v(" "),o("button",{staticClass:"button is-outlined",attrs:{disabled:e.isLoading},on:{click:function(t){return e.loginOrRegisterApple()}}},[o("span",{staticClass:"icon-btn",class:"icon-apple"}),e._v("\n            "+e._s(e.$t(e.mode+".form.social-networks.items.apple"))+"\n          ")])]),e._v(" "),o("h4",[e._v(e._s(e.$t(e.mode+".form.social-networks.suffix")))])]):"fill-email"!==e.mode?o("div",[e._v("...")]):e._e(),e._v(" "),"fill-email"===e.mode?o("p",{staticClass:"mcd-im-login__fill-email-info"},[e._v("\n        "+e._s(e.$t(e.mode+".form.description"))+"\n      ")]):o("p",{staticClass:"mcd-im-login__form-description"},[e._v(e._s(e.$t(e.mode+".form.description")))]),e._v(" "),o("div",{staticClass:"form"},[o("form",{ref:"loginForm",staticClass:"form",class:{errors:e.isErrors},attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.doSubmit(t)}}},[o("fieldset",[o("FormInput",{attrs:{form:"login.form","form-alias":e.formAlias,required:!0,disabled:e.disabledEmail,name:"email",type:"email",maxlength:"40",autocomplete:"false"},on:{invalid:e.invalidateForm},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),"fill-email"!=e.mode?o("FormInput",{attrs:{form:"login.form","form-alias":e.formAlias,required:!0,name:"password",type:e.isShowPassword?"text":"password","custom-error":e.passwordsNotMatch&&"register"===e.mode,maxlength:"40",minlength:"8",pattern:e.getRegExpPassword,autocomplete:"false"},on:{invalid:e.invalidateForm},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[o("span",{staticClass:"icon-show-password",class:{"is-not":!e.isShowPassword},on:{click:function(){return e.isShowPassword=!e.isShowPassword}}})]):e._e(),e._v(" "),"fill-email"===e.mode&&e.showedFields.length?o("FormBuilderProfile",{staticClass:"mcd-im-login__required-fields",attrs:{"form-alias":e.formAlias,"hide-phone-verification":"","needed-fields":e.showedFields,"all-required":""},on:{"valid-form":e.onFormChangeValidity},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}):e._e(),e._v(" "),"fill-email"===e.mode?o("FormCheckbox",{staticClass:"promoInfo",attrs:{form:"register.form",name:"promoInfo"},model:{value:e.form.promoInfo,callback:function(t){e.$set(e.form,"promoInfo",t)},expression:"form.promoInfo"}},[e._v("\n              "+e._s(e.$t("register.form.fields.promoInfo.placeholder"))+"\n            ")]):e._e(),e._v(" "),"fill-email"===e.mode?o("FormCheckbox",{staticClass:"promoInfo",attrs:{form:"register.form",name:"termsAndConditions"},model:{value:e.form.termsAndConditions,callback:function(t){e.$set(e.form,"termsAndConditions",t)},expression:"form.termsAndConditions"}},[e._v("\n              "+e._s(e.$t("register.form.fields.termsAndConditions.init"))+" \n              "),o("LinkResolver",{attrs:{link:e.termsLink}},[e._v("\n                "+e._s(e.$t("register.form.fields.termsAndConditions.terms"))+"\n              ")]),e._v("\n                "+e._s(e.$t("register.form.fields.termsAndConditions.and"))+"\n              "),o("LinkResolver",{attrs:{link:e.privacyLink}},[e._v("\n                "+e._s(e.$t("register.form.fields.termsAndConditions.privacy"))+"\n              ")])],1):e._e(),e._v(" "),"register"===e.mode?[o("FormInput",{attrs:{form:"register.form","form-alias":e.formAlias,required:!0,name:"passwordConfirmation",type:e.isShowPassword?"text":"password",pattern:e.getRegExpPassword,maxlength:"40",minlength:"8"},on:{invalid:e.invalidateForm},model:{value:e.form.passwordConfirmation,callback:function(t){e.$set(e.form,"passwordConfirmation",t)},expression:"form.passwordConfirmation"}}),e._v(" "),e.showedFields.length?o("FormBuilderProfile",{staticClass:"mcd-im-login__required-fields",attrs:{"form-alias":e.formAlias,"hide-phone-verification":"","needed-fields":e.showedFields,"all-required":""},on:{"valid-form":e.onFormChangeValidity},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}):e._e(),e._v(" "),o("FormCheckbox",{staticClass:"promoInfo",attrs:{form:"register.form",name:"termsAndConditions"},model:{value:e.form.termsAndConditions,callback:function(t){e.$set(e.form,"termsAndConditions",t)},expression:"form.termsAndConditions"}},[e._v("\n                "+e._s(e.$t("register.form.fields.termsAndConditions.init"))+" \n                "),o("LinkResolver",{attrs:{link:e.termsLink}},[e._v("\n                  "+e._s(e.$t("register.form.fields.termsAndConditions.terms"))+"\n                ")]),e._v("\n                  "+e._s(e.$t("register.form.fields.termsAndConditions.and"))+"\n                "),o("LinkResolver",{attrs:{link:e.privacyLink}},[e._v("\n                  "+e._s(e.$t("register.form.fields.termsAndConditions.privacy"))+"\n                ")])],1),e._v(" "),o("FormCheckbox",{staticClass:"promoInfo",attrs:{form:"register.form",name:"promoInfo"},model:{value:e.form.promoInfo,callback:function(t){e.$set(e.form,"promoInfo",t)},expression:"form.promoInfo"}},[e._v("\n                "+e._s(e.$t("register.form.fields.promoInfo.placeholder"))+"\n              ")]),e._v(" "),e.cpfOptIn?o("FormCheckbox",{staticClass:"promoInfo",attrs:{form:"register.form",name:"optInCpf"},model:{value:e.form.optInCpf,callback:function(t){e.$set(e.form,"optInCpf",t)},expression:"form.optInCpf"}},[e._v("\n                "+e._s(e.$t("register.form.fields.optIn.placeholder"))+" \n                "),o("LinkResolver",{attrs:{link:e.privacyLink}},[e._v("\n                  "+e._s(e.$t("register.form.fields.optIn.url"))+"\n                ")])],1):e._e()]:e._e()],2),e._v(" "),"login"===e.mode?o("a",{directives:[{name:"t",rawName:"v-t",value:"login.form.forgot-password",expression:"'login.form.forgot-password'"}],staticClass:"forgot-password",on:{click:function(t){e.mode="password-reset"}}}):e._e(),e._v(" "),o("div",{staticClass:"btn-container"},["fill-email"!==e.mode?o("button",{staticClass:"button is-primary submit-button",class:{"is-loading":e.submitting},attrs:{type:"submit",disabled:e.loginRegisterIsDisabled}},[e._v("\n              "+e._s(e.$t(e.mode+".form.submit"))+"\n            ")]):o("button",{staticClass:"button is-primary",class:{"is-loading":e.submitting},attrs:{disabled:e.disabledFillEmail},on:{click:function(t){return e.doFillEmail()}}},[e._v("\n              "+e._s(e.$t(e.mode+".form.submit"))+"\n            ")])])])]),e._v(" "),"fill-email"!==e.mode?o("div",{staticClass:"login-or-register"},[o("button",{staticClass:"button is-ghost already",attrs:{disabled:e.isLoading},on:{click:function(t){"login"===e.mode?e.mode="register":e.mode="login"}}},[e._v("\n          "+e._s(e.$t(e.mode+".already"))+"\n\n          "),o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"11",viewBox:"0 0 13 11"}},[o("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[o("g",{attrs:{fill:"#006BAE"}},[o("g",[o("path",{attrs:{d:"M13 5.612L8.246.607c-.892-.833-2.253-.813-3.104.085l1.592 1.676 1.85 1.946H3.007l-.869.013C.95 4.391 0 5.418 0 6.687h2.252L.83 6.685h7.966l-1.85 1.95-1.593 1.675c.852.897 2.213.916 3.097.075L13 5.612z",transform:"translate(-789.000000, -1054.000000) translate(639.000000, 1048.000000) translate(150.000000, 6.000000) translate(6.500000, 5.500000) scale(1, -1) translate(-6.500000, -5.500000)"}})])])])])])]):e._e()]],2)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{FormInput:o(178).default,FormBuilderProfile:o(660).default,FormCheckbox:o(349).default,LinkResolver:o(113).default,ModalFull:o(269).default})},1452:function(e,t,o){"use strict";var r=o(34),n=o(661);r({target:"String",proto:!0,forced:o(662)("sub")},{sub:function(){return n(this,"sub","","")}})},1453:function(e,t,o){"use strict";o(1434)},1454:function(e,t,o){var r=o(17)(!1);r.push([e.i,".mcd-im-login{padding:20px;text-align:center}.mcd-im-login .mcd-im-login-card{width:100%;max-width:574px;margin:auto}.mcd-im-login h1{font-size:24px;margin-top:30px;margin-bottom:15px}@media only screen and (min-width:1024px){.mcd-im-login h1{font-size:54px;margin:80px auto 44px}}.mcd-im-login h4{font-size:14px;margin-bottom:19px}.mcd-im-login h4:last-child{margin-bottom:10px}@media only screen and (min-width:1024px){.mcd-im-login h4{font-size:24px;margin-bottom:13px}.mcd-im-login h4:last-child{margin-top:45px}}.mcd-im-login .mcd-im-login__social-buttons .button{padding:14px 20px;margin:5px}@media only screen and (max-width:1023px){.mcd-im-login .mcd-im-login__social-buttons .button{width:100%;display:block;height:64px;position:relative;margin-bottom:15px}.mcd-im-login .mcd-im-login__social-buttons .button span{position:absolute;left:24px;top:20px}.mcd-im-login .mcd-im-login__social-buttons .button span img{width:20px;height:auto}}.mcd-im-login .mcd-im-login__form-description{font-size:12px;margin-bottom:25px}@media only screen and (min-width:1024px){.mcd-im-login .mcd-im-login__form-description{font-size:14px}}.mcd-im-login .mcd-im-login__fill-email-info{font-size:larger;margin-bottom:25px}.mcd-im-login .icon-btn{height:20px;width:20px;padding:5px;background-repeat:no-repeat;background-size:contain;margin-right:5px}.mcd-im-login .icon-facebook{background-image:url(/images/icons/facebook.svg)}.mcd-im-login .icon-google{background-image:url(/images/icons/google.svg)}.mcd-im-login .icon-apple{background-image:url(/images/icons/apple.svg)}.mcd-im-login .icon-huawei{background-image:url(/images/icons/huawei.svg)}.mcd-im-login .form{text-align:left}.mcd-im-login .btn-container{text-align:center;margin-top:30px}@media only screen and (max-width:1023px){.mcd-im-login .btn-container .button{width:100%;height:64px}}@media only screen and (min-width:1024px){.mcd-im-login .btn-container{margin-top:50px}}.mcd-im-login .forgot-password{text-align:left;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;color:#006aae;text-decoration:underline;display:block;margin-top:-16px}.mcd-im-login .login-or-register{margin-top:10px}.mcd-im-login .login-or-register .already{width:145px;height:20px;font-size:12px;font-weight:700;text-align:right;text-decoration:none;color:#006aae}.mcd-im-login .login-or-register .already .return-svg{transform:rotate(180deg)}.mcd-im-login .login-or-register .already:focus{box-shadow:none}.mcd-im-login .login-or-register .already[disabled]{border:none}@media only screen and (min-width:1024px){.mcd-im-login .login-or-register{margin-top:35px}.mcd-im-login .login-or-register .already{font-size:16px}}.mcd-im-login .promoInfo a{color:#006aae;font-weight:400;text-decoration:underline}.mcd-im-login .icon-show-password{position:absolute;right:10px;height:2rem;width:2rem;background-image:url(/images/icons/eye.svg);cursor:pointer}.mcd-im-login .icon-show-password.is-not{background-image:url(/images/icons/eye-no.svg)}",""]),e.exports=r}}]);